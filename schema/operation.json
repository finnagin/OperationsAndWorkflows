{
    "$schema": "https://json-schema.org/draft-07/schema",
    "$id": "http://standards.ncats.io/operation.json",
    "anyOf": [
        {
            "$ref": "#/$defs/OperationAnnotate"
        },
        {
            "$ref": "#/$defs/OperationBind"
        },
        {
            "$ref": "#/$defs/OperationCompleteResults"
        },
        {
            "$ref": "#/$defs/OperationFill"
        },
        {
            "$ref": "#/$defs/OperationFilterKgraph"
        },
        {
            "$ref": "#/$defs/OperationFilterKgraphOrphans"
        },
        {
            "$ref": "#/$defs/OperationFilterKgraphPercentile"
        },
        {
            "$ref": "#/$defs/OperationFilterKgraphStdDev"
        },
        {
            "$ref": "#/$defs/OperationFilterKgraphTopN"
        },
        {
            "$ref": "#/$defs/OperationFilterResults"
        },
        {
            "$ref": "#/$defs/OperationFilterResultsTopN"
        },
        {
            "$ref": "#/$defs/OperationLookup"
        },
        {
            "$ref": "#/$defs/OperationOverlay"
        },
        {
            "$ref": "#/$defs/OperationOverlayComputeJaccard"
        },
        {
            "$ref": "#/$defs/OperationOverlayComputeNgd"
        },
        {
            "$ref": "#/$defs/OperationOverlayFisherExactTest"
        },
        {
            "$ref": "#/$defs/OperationRestate"
        },
        {
            "$ref": "#/$defs/OperationScore"
        }
    ],
    "$defs": {
        "OperationAnnotate": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "enum": [
                        "annotate"
                    ]
                },
                "parameters": {}
            },
            "required": [
                "id"
            ],
            "additionalProperties": false
        },
        "OperationBind": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "enum": [
                        "bind"
                    ]
                },
                "parameters": {}
            },
            "required": [
                "id"
            ],
            "additionalProperties": false
        },
        "OperationCompleteResults": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "enum": [
                        "complete_results"
                    ]
                },
                "parameters": {}
            },
            "required": [
                "id"
            ],
            "additionalProperties": false
        },
        "OperationFill": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "enum": [
                        "fill"
                    ]
                },
                "parameters": {
                    "type": "object",
                    "oneOf": [
                        {
                            "properties": {
                                "allowlist": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    },
                                    "description": "List of knowledge providers/sources that may be used to provide knowledge.",
                                    "example": [
                                        "icees"
                                    ],
                                    "minLength": 1
                                }
                            },
                            "additionalProperties": false
                        },
                        {
                            "properties": {
                                "denylist": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    },
                                    "description": "List of knowledge providers/sources that may NOT be used to provide knowledge.",
                                    "example": [
                                        "ctd"
                                    ],
                                    "minLength": 1
                                }
                            },
                            "additionalProperties": false
                        }
                    ]
                }
            },
            "required": [
                "id"
            ],
            "additionalProperties": false
        },
        "OperationFilterKgraph": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "enum": [
                        "filter_kgraph"
                    ]
                },
                "parameters": {}
            },
            "required": [
                "id"
            ],
            "additionalProperties": false
        },
        "OperationFilterKgraphOrphans": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "enum": [
                        "filter_kgraph_orphans"
                    ]
                },
                "parameters": {}
            },
            "required": [
                "id"
            ],
            "additionalProperties": false
        },
        "OperationFilterKgraphPercentile": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "enum": [
                        "filter_kgraph_percentile"
                    ]
                },
                "parameters": {
                    "type": "object",
                    "properties": {
                        "edge_attribute": {
                            "description": "The name of the edge attribute to filter on.",
                            "type": "string",
                            "example": "normalized_google_distance"
                        },
                        "threshold": {
                            "description": "The percentile to threshold on.",
                            "type": "float",
                            "example": 96.8,
                            "minimum": 0,
                            "maximum": 100,
                            "default": 95
                        },
                        "remove_above_or_below": {
                            "description": "Indicates whether to remove above or below the given threshold.",
                            "type": "string",
                            "enum": [
                                "above",
                                "below"
                            ],
                            "default": "below"
                        },
                        "qedge_keys": {
                            "description": "This indicates if you only want to filter on specific edge_keys. If not provided or empty, all edges will be filtered on.",
                            "type": "array",
                            "example": [
                                "e01"
                            ]
                        },
                        "qnode_keys": {
                            "description": "This indicates if you only want nodes corresponding to a specific list of qnode_keys to be removed. If not provided or empty, no nodes will be removed when filtering. Allows us to know what to do with the nodes connected to edges that are removed.",
                            "type": "array",
                            "example": [
                                "n01"
                            ],
                            "default": []
                        }
                    },
                    "required": [
                        "edge_attribute"
                    ]
                }
            },
            "required": [
                "id",
                "parameters"
            ],
            "additionalProperties": false
        },
        "OperationFilterKgraphStdDev": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "enum": [
                        "filter_kgraph_std_dev"
                    ]
                },
                "parameters": {
                    "type": "object",
                    "properties": {
                        "edge_attribute": {
                            "description": "The name of the edge attribute to filter on.",
                            "type": "string",
                            "example": "normalized_google_distance"
                        },
                        "threshold": {
                            "description": "The number of standard deviations to threshold on.",
                            "type": "float",
                            "example": 1.2,
                            "minimum": 0,
                            "default": 1
                        },
                        "remove_above": {
                            "description": "Indictes whether to remove above or below the given threshold.",
                            "type": "bool",
                            "example": true,
                            "default": false
                        },
                        "top": {
                            "description": "Indicate whether or not the threshold should be placed in the top or bottom of the values. E.g. top set as True will set the cutoff for filtering as the mean + threshold * std_dev while setting top to False will set the cutoff as the mean - std_dev * threshold.",
                            "type": "bool",
                            "example": false,
                            "default": true
                        },
                        "edge_keys": {
                            "description": "This indicates if you only want to filter on specific edge_keys. If not provided or empty, all edges will be filtered on.",
                            "type": "array",
                            "example": [
                                "e01"
                            ],
                            "default": null
                        },
                        "qnode_keys": {
                            "description": "This indicates if you only want nodes corresponding to a specific list of qnode_keys to be removed. If not provided or empty, no nodes will be removed when filtering.",
                            "type": "array",
                            "example": [
                                "n01"
                            ],
                            "default": null
                        }
                    },
                    "required": [
                        "edge_attribute"
                    ]
                }
            },
            "required": [
                "id",
                "parameters"
            ],
            "additionalProperties": false
        },
        "OperationFilterKgraphTopN": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "enum": [
                        "filter_kgraph_top_n"
                    ]
                },
                "parameters": {
                    "type": "object",
                    "properties": {
                        "edge_attribute": {
                            "description": "The name of the edge attribute to filter on.",
                            "type": "string",
                            "example": "normalized_google_distance"
                        },
                        "max_edges": {
                            "description": "The number of edges to keep.",
                            "type": "integer",
                            "example": 10,
                            "minimum": 0,
                            "default": 50
                        },
                        "keep_top_or_bottom": {
                            "description": "Indicate whether or not the the top or bottom n values should be kept.",
                            "type": "string",
                            "enum": [
                                "top",
                                "bottom"
                            ],
                            "default": "top"
                        },
                        "qedge_keys": {
                            "description": "This indicates if you only want to filter on specific edge_keys. If not provided or empty, all edges will be filtered on.",
                            "type": "array",
                            "example": [
                                "e01"
                            ]
                        },
                        "qnode_keys": {
                            "description": "This indicates if you only want nodes corresponding to a specific list of qnode_keys to be removed. If not provided or empty, no nodes will be removed when filtering. Allows us to know what to do with the nodes connected to edges that are removed.",
                            "type": "array",
                            "example": [
                                "n01"
                            ],
                            "default": []
                        }
                    },
                    "required": [
                        "edge_attribute"
                    ]
                }
            },
            "required": [
                "id",
                "parameters"
            ],
            "additionalProperties": false
        },
        "OperationFilterResults": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "enum": [
                        "filter_results"
                    ]
                },
                "parameters": {}
            },
            "required": [
                "id"
            ],
            "additionalProperties": false
        },
        "OperationFilterResultsTopN": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "enum": [
                        "filter_results_top_n"
                    ]
                },
                "parameters": {
                    "type": "object",
                    "properties": {
                        "max_results": {
                            "description": "The maximum number of results to return.",
                            "type": "integer",
                            "minimum": 0,
                            "example": 50
                        }
                    },
                    "required": [
                        "max_results"
                    ]
                }
            },
            "required": [
                "id",
                "parameters"
            ],
            "additionalProperties": false
        },
        "OperationLookup": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "enum": [
                        "lookup"
                    ]
                },
                "parameters": {}
            },
            "required": [
                "id"
            ],
            "additionalProperties": false
        },
        "OperationOverlay": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "enum": [
                        "overlay"
                    ]
                },
                "parameters": {}
            },
            "required": [
                "id"
            ],
            "additionalProperties": false
        },
        "OperationOverlayComputeJaccard": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "enum": [
                        "overlay_compute_jaccard"
                    ]
                },
                "parameters": {
                    "type": "object",
                    "properties": {
                        "intermediate_node_key": {
                            "description": "A qnode key specifying the intermediate node.",
                            "type": "string",
                            "example": "n1"
                        },
                        "end_node_keys": {
                            "description": "A list of qnode keys specifying the ending nodes.",
                            "type": "array",
                            "example": [
                                "n0",
                                "n2"
                            ]
                        },
                        "virtual_relation_label": {
                            "description": "The key of the query graph edge that corresponds to the knowledge graph edges that were added by this operation.",
                            "type": "string",
                            "example": "J1"
                        }
                    },
                    "required": [
                        "intermediate_node_key",
                        "end_node_keys",
                        "virtual_relation_label"
                    ]
                }
            },
            "required": [
                "id",
                "parameters"
            ],
            "additionalProperties": false
        },
        "OperationOverlayComputeNgd": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "enum": [
                        "overlay_compute_ngd"
                    ]
                },
                "parameters": {
                    "type": "object",
                    "properties": {
                        "virtual_relation_label": {
                            "description": "An label to help identify the virtual edge in the relation field",
                            "type": "string",
                            "example": "NGD1"
                        },
                        "qnode_keys": {
                            "description": "A list of qnode keys to overlay pairwise edges onto. Must be be a list of at least 2 valid qnodes.",
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "example": [
                                "n00",
                                "n01"
                            ]
                        }
                    },
                    "required": [
                        "virtual_relation_label",
                        "qnode_keys"
                    ]
                }
            },
            "required": [
                "id",
                "parameters"
            ],
            "additionalProperties": false
        },
        "OperationOverlayFisherExactTest": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "enum": [
                        "overlay_fisher_exact_test"
                    ]
                },
                "parameters": {
                    "type": "object",
                    "properties": {
                        "subject_qnode_key": {
                            "description": "A specific subject query node id.",
                            "type": "string",
                            "example": "n1"
                        },
                        "object_qnode_key": {
                            "description": "A specific object query node id.",
                            "type": "string",
                            "example": "n2"
                        },
                        "virtual_relation_label": {
                            "description": "An label to help identify the virtual edge.",
                            "type": "string",
                            "example": "f1"
                        },
                        "rel_edge_key": {
                            "description": "A specific Qedge id connected to both subject nodes and object nodes in message KG (optional, otherwise all edges connected to both subject nodes and object nodes in message KG are considered).",
                            "type": "string",
                            "example": "e01"
                        }
                    },
                    "required": [
                        "subject_qnode_key",
                        "object_qnode_key",
                        "virtual_relation_label"
                    ]
                }
            },
            "required": [
                "id",
                "parameters"
            ],
            "additionalProperties": false
        },
        "OperationRestate": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "enum": [
                        "restate"
                    ]
                },
                "parameters": {}
            },
            "required": [
                "id"
            ],
            "additionalProperties": false
        },
        "OperationScore": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "string",
                    "enum": [
                        "score"
                    ]
                },
                "parameters": {}
            },
            "required": [
                "id"
            ],
            "additionalProperties": false
        }
    }
}