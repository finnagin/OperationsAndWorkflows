id: overlay_predict_drug_treats_disease
subclass_of: overlay
name: overlay predict drug treats disease
description: predict_drug_treats_disease utilizes a machine learning model (trained on KP ARAX/KG1) to assign a probability that a given drug/chemical_substance treats a disease/phenotypic feature. For more information about how this model was trained and how it performs, please see (this publication)[https://www.biorxiv.org/content/10.1101/765305v2]. The drug-disease treatment prediction probability is included as an edge attribute (with the attribute name "probability_treats") . You have the choice of applying this to all appropriate edges in the knowledge graph, or only between specified subject/object qnode id's (make sure one is a chemical_substance, and the other is a disease or phenotypic_feature). If the later, virtual edges are added with the relation specified by "virtual_edge_type" and the type "probably_treats". 
unique: true
examples:
- input: overlay/messages/13_input_pred_drug_trt_disease.json
  output: overlay/messages/14_output_pred_drug_trt_disease.json
  parameters:
    virtual_relation_label: pred_trt
    qnode_keys:
      - type-2 diabetes
      - ibuprofen
input_requirements: []
output_guarantees: []
allowed_changes:
- add kedges
- add qedges
- add bindings to results
parameters:
  type: object
  properties:
    virtual_relation_label:
      description: An label to help identify the virtual edge in the relation field
      type: string
      example: j1
    qnode_keys:
      description: A list of qnode keys to overlay pairwise edges onto. Must be be a list of at least 2 valid qnodes.
      type: array
      items:
        type: string
      example: [n00, n01]
    threshold:
      description: What cut-off/threshold to use for DTD probability (optional, the default is 0.8)
      type: float
      example: 0.95
      minimum: 0
      maximum: 1
      default: 0.8
    slow_mode:
      description: Whether to call DTD model directly rather than the precomputed DTD database to do a real-time calculation for DTD probability (default is False)
      type: bool
      example: true, false
      default: false
  required: ""
